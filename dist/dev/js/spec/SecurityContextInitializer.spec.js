"use strict";
/// <reference path='../../typings/main.d.ts' />
var SecurityContext_1 = require('../src/SecurityContext');
var SecurityContextInitializer_1 = require('../src/SecurityContextInitializer');
describe('SecurityContextInitializer', function () {
    var encodedAccessToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImEzck1VZ01Gdjl0UGNsTGE2eUYzekFrZnF1RSIsIng1dCI6ImEzck1VZ01Gdjl0UGNsTGE2eUYzekFrZnF1RSJ9.eyJpc3MiOiJodHRwczovL3BqbXRzdHMvIiwiYXVkIjoiaHR0cHM6Ly9wam10c3RzL3Jlc291cmNlcyIsImV4cCI6MTQ2MTg4NjIzNSwibmJmIjoxNDYxODgyNjM1LCJjbGllbnRfaWQiOiIyMzgwIiwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSIsImVtYWlsIiwicGptdF9wcm9maWxlIiwicGVybWlzc2FvXzIzODAiXSwic3ViIjoiMTY4NDMiLCJhdXRoX3RpbWUiOjE0NjExNjQ5MzIsImlkcCI6Imlkc3J2IiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLkdyYWZpY29zIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLkdyYWZpY29zLkRpdmVyc29zIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLkdyYWZpY29zLlNvYnJlIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLlJlbGF0b3Jpby5SZWxhdG9yaW9DcmlhY2FvIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLlJlbGF0b3Jpb3MuUmVsYXRvcmlvQWNlc3NvcyI6WyJBY2Vzc28iLCJBbHRlcmFyIiwiRXhjbHVpciIsIk5vdm8iXSwicGVybWlzc2FvfDIzODA6SG9tZSI6IkFjZXNzbyIsInBlcm1pc3Nhb3wyMzgwOk5vdGljaWFzIjoiQWNlc3NvIiwicGVybWlzc2FvfDIzODA6UmVsYXRvcmlvcyI6IkFjZXNzbyIsImFtciI6WyJwYXNzd29yZCJdfQ.Eg-bdPAHKMIDlVMiGNJxEJ9zqth2UmU-k0Ek1BIthC6WKnfyFOQ7EQXIbQGBrLhm4CHr_siwrgThAL5Nq3GJAo0_wxfjgdgt965FHZLO0Xa-QRTvfWdwCU7_jHYjlwuyJ8IDiEpQf6y6eeUIMxRI0JZa-aIrt5MtMCrMMecTdURXF91bXBFdNDJSGLpqrf687HuzUCHrrznBr6wO-5-5Y24rnpTbEclS9KDJYuTZoBQA6-Tkcy_XBHg4c1whwwORf9Nfv1c8_V6ZjML1eiqdlK7MDjqmsZbAZkScrJzZmxpoBMkvAMDIhkmB8ZVsGkrYICqtrAR6BIuTk2aK3z8low";
    var accessToken = JSON.parse("{\"iss\":\"https://pjmtsts/\",\"aud\":\"https://pjmtsts/resources\",\"exp\":1462403582,\"nbf\":1462399982,\"client_id\":\"2380\",\"scope\":[\"openid\",\"profile\",\"pjmt_profile\",\"email\",\"permissao_2380\"],\"sub\":\"16843\",\"auth_time\":1462397042,\"idp\":\"idsrv\",\"permissao|2380:Dashboard\":\"Acesso\",\"permissao|2380:Dashboard.Graficos\":\"Acesso\",\"permissao|2380:Dashboard.Graficos.Diversos\":\"Acesso\",\"permissao|2380:Dashboard.Graficos.Sobre\":\"Acesso\",\"permissao|2380:Dashboard.Relatorio.RelatorioCriacao\":\"Acesso\",\"permissao|2380:Dashboard.Relatorios.RelatorioAcessos\":[\"Acesso\",\"Alterar\",\"Excluir\",\"Novo\"],\"permissao|2380:Home\":\"Acesso\",\"permissao|2380:Noticias\":\"Acesso\",\"permissao|2380:Relatorios\":\"Acesso\",\"amr\":[\"password\"]}");
    var encodedIdentityToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImEzck1VZ01Gdjl0UGNsTGE2eUYzekFrZnF1RSIsIng1dCI6ImEzck1VZ01Gdjl0UGNsTGE2eUYzekFrZnF1RSJ9.eyJpc3MiOiJodHRwczovL3BqbXRzdHMvIiwiYXVkIjoiMjM4MCIsImV4cCI6MTQ2MTg4MjkzNSwibmJmIjoxNDYxODgyNjM1LCJub25jZSI6IjEyMjMwMjA2NTU5NDkyMDgiLCJpYXQiOjE0NjE4ODI2MzUsImF0X2hhc2giOiIzeV9iSi1oZEZiMjE3VHNpQUVpVnZ3IiwiY19oYXNoIjoibGhMRDFOaTNkcms0aEJKYXBQRUpaQSIsInNpZCI6IjNkMGQzNWYxNGFjYWQ3MzEyM2E2Y2FmMGU5NTY5NGIzIiwic3ViIjoiMTY4NDMiLCJhdXRoX3RpbWUiOjE0NjExNjQ5MzIsImlkcCI6Imlkc3J2IiwiYW1yIjpbInBhc3N3b3JkIl19.hS9vFGcUq6j3CBRsUDm2RG0zwyNbdRijN1L_f7EmX4d5o8Wxh9RaWxPmYUSAGt211lrnp1W0zm7HfWqOu3szJnhCWKfX_P9CYuc-3NyWXxL9iMZM07lzweunJeYrWM99KCWT9il_ptR3cvNBEZPBBHBmzQ5EPbHqMga35U3U0rHTuC1134qvDFE-2YoGyNXxP5KD-pyVlx0hPXOsfv9xYfKr9C31eEMqyyavZWpmiH8Ywz1vlJTMdX6Y9Gm7599Ojqe66mRAaDX7_rf8kecgvkSZD0uozHPGIX-Y8ORPS83AHXTOFOAXoO3hvxnJJ6iN1oVJSzWVsI59VFbvMIawCw";
    beforeEach(function () {
        SecurityContext_1.SecurityContext.Reset();
    });
    it('InitializeWithEncodedTokens should instantiate a Principal', function () {
        SecurityContextInitializer_1.SecurityContextInitializer.InitializeWithEncodedTokens([encodedAccessToken, encodedIdentityToken]);
        expect(SecurityContext_1.SecurityContext.Current.Principal).toBeDefined();
    });
    it('InitializeWithEncodedTokens should have a User authenticated', function () {
        SecurityContextInitializer_1.SecurityContextInitializer.InitializeWithEncodedTokens([encodedAccessToken, encodedIdentityToken]);
        expect(SecurityContext_1.SecurityContext.Current.Principal.IsAuthenticated).toBeTruthy();
    });
    it('InitializeWithTokens should instantiate a Principal', function () {
        SecurityContextInitializer_1.SecurityContextInitializer.InitializeWithTokens([accessToken]);
        expect(SecurityContext_1.SecurityContext.Current.Principal).toBeDefined();
    });
    it('InitializeWithTokens should have a User authenticated', function () {
        SecurityContextInitializer_1.SecurityContextInitializer.InitializeWithTokens([accessToken]);
        expect(SecurityContext_1.SecurityContext.Current.Principal.IsAuthenticated).toBeTruthy();
    });
    it('InitializeWithTokens should have a User authenticated', function () {
        SecurityContextInitializer_1.SecurityContextInitializer.InitializeWithTokens([{ name: 'João Vitor' }]);
        expect(SecurityContext_1.SecurityContext.Current.Principal.Identity.Name).toBe('João Vitor');
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwZWMvU2VjdXJpdHlDb250ZXh0SW5pdGlhbGl6ZXIuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsZ0RBQWdEO0FBQ2hELGdDQUE4Qix3QkFBd0IsQ0FBQyxDQUFBO0FBQ3ZELDJDQUF5QyxtQ0FBbUMsQ0FBQyxDQUFBO0FBRTdFLFFBQVEsQ0FBQyw0QkFBNEIsRUFBRTtJQUVuQyxJQUFNLGtCQUFrQixHQUFVLGc0Q0FBZzRDLENBQUM7SUFFbjZDLElBQU0sV0FBVyxHQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsK3dCQUEyckIsQ0FBQyxDQUFDO0lBRWh1QixJQUFNLG9CQUFvQixHQUFVLDAyQkFBMDJCLENBQUM7SUFHajVCLFVBQVUsQ0FBQztRQUNQLGlDQUFlLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsNERBQTRELEVBQUU7UUFFN0QsdURBQTBCLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7UUFFbkcsTUFBTSxDQUFDLGlDQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBRTVELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDhEQUE4RCxFQUFFO1FBRS9ELHVEQUEwQixDQUFDLDJCQUEyQixDQUFDLENBQUMsa0JBQWtCLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1FBRW5HLE1BQU0sQ0FBQyxpQ0FBZSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7SUFFM0UsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMscURBQXFELEVBQUU7UUFFdEQsdURBQTBCLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBRS9ELE1BQU0sQ0FBQyxpQ0FBZSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUU1RCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyx1REFBdUQsRUFBRTtRQUV4RCx1REFBMEIsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFFL0QsTUFBTSxDQUFDLGlDQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUUzRSxDQUFDLENBQUMsQ0FBQztJQUdILEVBQUUsQ0FBQyx1REFBdUQsRUFBRTtRQUV4RCx1REFBMEIsQ0FBQyxvQkFBb0IsQ0FBRSxDQUFFLEVBQUUsSUFBSSxFQUFDLFlBQVksRUFBRSxDQUFFLENBQUUsQ0FBQztRQUU3RSxNQUFNLENBQUMsaUNBQWUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFL0UsQ0FBQyxDQUFDLENBQUM7QUFFUCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJzcGVjL1NlY3VyaXR5Q29udGV4dEluaXRpYWxpemVyLnNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi90eXBpbmdzL21haW4uZC50cycgLz5cclxuaW1wb3J0IHtTZWN1cml0eUNvbnRleHR9IGZyb20gJy4uL3NyYy9TZWN1cml0eUNvbnRleHQnO1xyXG5pbXBvcnQge1NlY3VyaXR5Q29udGV4dEluaXRpYWxpemVyfSBmcm9tICcuLi9zcmMvU2VjdXJpdHlDb250ZXh0SW5pdGlhbGl6ZXInO1xyXG5cclxuZGVzY3JpYmUoJ1NlY3VyaXR5Q29udGV4dEluaXRpYWxpemVyJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICBjb25zdCBlbmNvZGVkQWNjZXNzVG9rZW46c3RyaW5nID0gXCJleUowZVhBaU9pSktWMVFpTENKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkltRXpjazFWWjAxR2RqbDBVR05zVEdFMmVVWXpla0ZyWm5GMVJTSXNJbmcxZENJNkltRXpjazFWWjAxR2RqbDBVR05zVEdFMmVVWXpla0ZyWm5GMVJTSjkuZXlKcGMzTWlPaUpvZEhSd2N6b3ZMM0JxYlhSemRITXZJaXdpWVhWa0lqb2lhSFIwY0hNNkx5OXdhbTEwYzNSekwzSmxjMjkxY21ObGN5SXNJbVY0Y0NJNk1UUTJNVGc0TmpJek5Td2libUptSWpveE5EWXhPRGd5TmpNMUxDSmpiR2xsYm5SZmFXUWlPaUl5TXpnd0lpd2ljMk52Y0dVaU9sc2liM0JsYm1sa0lpd2ljSEp2Wm1sc1pTSXNJbVZ0WVdsc0lpd2ljR3B0ZEY5d2NtOW1hV3hsSWl3aWNHVnliV2x6YzJGdlh6SXpPREFpWFN3aWMzVmlJam9pTVRZNE5ETWlMQ0poZFhSb1gzUnBiV1VpT2pFME5qRXhOalE1TXpJc0ltbGtjQ0k2SW1sa2MzSjJJaXdpY0dWeWJXbHpjMkZ2ZkRJek9EQTZSR0Z6YUdKdllYSmtJam9pUVdObGMzTnZJaXdpY0dWeWJXbHpjMkZ2ZkRJek9EQTZSR0Z6YUdKdllYSmtMa2R5WVdacFkyOXpJam9pUVdObGMzTnZJaXdpY0dWeWJXbHpjMkZ2ZkRJek9EQTZSR0Z6YUdKdllYSmtMa2R5WVdacFkyOXpMa1JwZG1WeWMyOXpJam9pUVdObGMzTnZJaXdpY0dWeWJXbHpjMkZ2ZkRJek9EQTZSR0Z6YUdKdllYSmtMa2R5WVdacFkyOXpMbE52WW5KbElqb2lRV05sYzNOdklpd2ljR1Z5YldsemMyRnZmREl6T0RBNlJHRnphR0p2WVhKa0xsSmxiR0YwYjNKcGJ5NVNaV3hoZEc5eWFXOURjbWxoWTJGdklqb2lRV05sYzNOdklpd2ljR1Z5YldsemMyRnZmREl6T0RBNlJHRnphR0p2WVhKa0xsSmxiR0YwYjNKcGIzTXVVbVZzWVhSdmNtbHZRV05sYzNOdmN5STZXeUpCWTJWemMyOGlMQ0pCYkhSbGNtRnlJaXdpUlhoamJIVnBjaUlzSWs1dmRtOGlYU3dpY0dWeWJXbHpjMkZ2ZkRJek9EQTZTRzl0WlNJNklrRmpaWE56YnlJc0luQmxjbTFwYzNOaGIzd3lNemd3T2s1dmRHbGphV0Z6SWpvaVFXTmxjM052SWl3aWNHVnliV2x6YzJGdmZESXpPREE2VW1Wc1lYUnZjbWx2Y3lJNklrRmpaWE56YnlJc0ltRnRjaUk2V3lKd1lYTnpkMjl5WkNKZGZRLkVnLWJkUEFIS01JRGxWTWlHTkp4RUo5enF0aDJVbVUtazBFazFCSXRoQzZXS25meUZPUTdFUVhJYlFHQnJMaG00Q0hyX3Npd3JnVGhBTDVOcTNHSkFvMF93eGZqZ2RndDk2NUZIWkxPMFhhLVFSVHZmV2R3Q1U3X2pIWWpsd3V5SjhJRGlFcFFmNnk2ZWVVSU14UkkwSlphLWFJcnQ1TXRNQ3JNTWVjVGRVUlhGOTFiWEJGZE5ESlNHTHBxcmY2ODdIdXpVQ0hycnpuQnI2d08tNS01WTI0cm5wVGJFY2xTOUtESll1VFpvQlFBNi1Ua2N5X1hCSGc0YzF3aHd3T1JmOU5mdjFjOF9WNlpqTUwxZWlxZGxLN01EanFtc1piQVprU2NySnpabXhwb0JNa3ZBTURJaGttQjhaVnNHa3JZSUNxdHJBUjZCSXVUazJhSzN6OGxvd1wiO1xyXG4gICAgXHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbjphbnkgPSBKU09OLnBhcnNlKGB7XCJpc3NcIjpcImh0dHBzOi8vcGptdHN0cy9cIixcImF1ZFwiOlwiaHR0cHM6Ly9wam10c3RzL3Jlc291cmNlc1wiLFwiZXhwXCI6MTQ2MjQwMzU4MixcIm5iZlwiOjE0NjIzOTk5ODIsXCJjbGllbnRfaWRcIjpcIjIzODBcIixcInNjb3BlXCI6W1wib3BlbmlkXCIsXCJwcm9maWxlXCIsXCJwam10X3Byb2ZpbGVcIixcImVtYWlsXCIsXCJwZXJtaXNzYW9fMjM4MFwiXSxcInN1YlwiOlwiMTY4NDNcIixcImF1dGhfdGltZVwiOjE0NjIzOTcwNDIsXCJpZHBcIjpcImlkc3J2XCIsXCJwZXJtaXNzYW98MjM4MDpEYXNoYm9hcmRcIjpcIkFjZXNzb1wiLFwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLkdyYWZpY29zXCI6XCJBY2Vzc29cIixcInBlcm1pc3Nhb3wyMzgwOkRhc2hib2FyZC5HcmFmaWNvcy5EaXZlcnNvc1wiOlwiQWNlc3NvXCIsXCJwZXJtaXNzYW98MjM4MDpEYXNoYm9hcmQuR3JhZmljb3MuU29icmVcIjpcIkFjZXNzb1wiLFwicGVybWlzc2FvfDIzODA6RGFzaGJvYXJkLlJlbGF0b3Jpby5SZWxhdG9yaW9DcmlhY2FvXCI6XCJBY2Vzc29cIixcInBlcm1pc3Nhb3wyMzgwOkRhc2hib2FyZC5SZWxhdG9yaW9zLlJlbGF0b3Jpb0FjZXNzb3NcIjpbXCJBY2Vzc29cIixcIkFsdGVyYXJcIixcIkV4Y2x1aXJcIixcIk5vdm9cIl0sXCJwZXJtaXNzYW98MjM4MDpIb21lXCI6XCJBY2Vzc29cIixcInBlcm1pc3Nhb3wyMzgwOk5vdGljaWFzXCI6XCJBY2Vzc29cIixcInBlcm1pc3Nhb3wyMzgwOlJlbGF0b3Jpb3NcIjpcIkFjZXNzb1wiLFwiYW1yXCI6W1wicGFzc3dvcmRcIl19YCk7XHJcblxyXG4gICAgY29uc3QgZW5jb2RlZElkZW50aXR5VG9rZW46c3RyaW5nID0gXCJleUowZVhBaU9pSktWMVFpTENKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkltRXpjazFWWjAxR2RqbDBVR05zVEdFMmVVWXpla0ZyWm5GMVJTSXNJbmcxZENJNkltRXpjazFWWjAxR2RqbDBVR05zVEdFMmVVWXpla0ZyWm5GMVJTSjkuZXlKcGMzTWlPaUpvZEhSd2N6b3ZMM0JxYlhSemRITXZJaXdpWVhWa0lqb2lNak00TUNJc0ltVjRjQ0k2TVRRMk1UZzRNamt6TlN3aWJtSm1Jam94TkRZeE9EZ3lOak0xTENKdWIyNWpaU0k2SWpFeU1qTXdNakEyTlRVNU5Ea3lNRGdpTENKcFlYUWlPakUwTmpFNE9ESTJNelVzSW1GMFgyaGhjMmdpT2lJemVWOWlTaTFvWkVaaU1qRTNWSE5wUVVWcFZuWjNJaXdpWTE5b1lYTm9Jam9pYkdoTVJERk9hVE5rY21zMGFFSktZWEJRUlVwYVFTSXNJbk5wWkNJNklqTmtNR1F6TldZeE5HRmpZV1EzTXpFeU0yRTJZMkZtTUdVNU5UWTVOR0l6SWl3aWMzVmlJam9pTVRZNE5ETWlMQ0poZFhSb1gzUnBiV1VpT2pFME5qRXhOalE1TXpJc0ltbGtjQ0k2SW1sa2MzSjJJaXdpWVcxeUlqcGJJbkJoYzNOM2IzSmtJbDE5LmhTOXZGR2NVcTZqM0NCUnNVRG0yUkcwend5TmJkUmlqTjFMX2Y3RW1YNGQ1bzhXeGg5UmFXeFBtWVVTQUd0MjExbHJucDFXMHptN0hmV3FPdTNzekpuaENXS2ZYX1A5Q1l1Yy0zTnlXWHhMOWlNWk0wN2x6d2V1bkplWXJXTTk5S0NXVDlpbF9wdFIzY3ZOQkVaUEJCSEJtelE1RVBiSHFNZ2EzNVUzVTBySFR1QzExMzRxdkRGRS0yWW9HeU5YeFA1S0QtcHlWbHgwaFBYT3Nmdjl4WWZLcjlDMzFlRU1xeXlhdlpXcG1pSDhZd3oxdmxKVE1kWDZZOUdtNzU5OU9qcWU2Nm1SQWFEWDdfcmY4a2VjZ3ZrU1pEMHVvekhQR0lYLVk4T1JQUzgzQUhYVE9GT0FYb08zaHZ4bkpKNmlOMW9WSlN6V1ZzSTU5VkZidk1JYXdDd1wiO1xyXG4gICAgXHJcbiAgICBcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgU2VjdXJpdHlDb250ZXh0LlJlc2V0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnSW5pdGlhbGl6ZVdpdGhFbmNvZGVkVG9rZW5zIHNob3VsZCBpbnN0YW50aWF0ZSBhIFByaW5jaXBhbCcsICgpID0+IHtcclxuICAgIFxyXG4gICAgICAgIFNlY3VyaXR5Q29udGV4dEluaXRpYWxpemVyLkluaXRpYWxpemVXaXRoRW5jb2RlZFRva2VucyhbZW5jb2RlZEFjY2Vzc1Rva2VuLCBlbmNvZGVkSWRlbnRpdHlUb2tlbl0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGV4cGVjdChTZWN1cml0eUNvbnRleHQuQ3VycmVudC5QcmluY2lwYWwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpdCgnSW5pdGlhbGl6ZVdpdGhFbmNvZGVkVG9rZW5zIHNob3VsZCBoYXZlIGEgVXNlciBhdXRoZW50aWNhdGVkJywgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIFNlY3VyaXR5Q29udGV4dEluaXRpYWxpemVyLkluaXRpYWxpemVXaXRoRW5jb2RlZFRva2VucyhbZW5jb2RlZEFjY2Vzc1Rva2VuLCBlbmNvZGVkSWRlbnRpdHlUb2tlbl0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGV4cGVjdChTZWN1cml0eUNvbnRleHQuQ3VycmVudC5QcmluY2lwYWwuSXNBdXRoZW50aWNhdGVkKS50b0JlVHJ1dGh5KCk7XHJcbiAgICBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpdCgnSW5pdGlhbGl6ZVdpdGhUb2tlbnMgc2hvdWxkIGluc3RhbnRpYXRlIGEgUHJpbmNpcGFsJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICAgICAgU2VjdXJpdHlDb250ZXh0SW5pdGlhbGl6ZXIuSW5pdGlhbGl6ZVdpdGhUb2tlbnMoW2FjY2Vzc1Rva2VuXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KFNlY3VyaXR5Q29udGV4dC5DdXJyZW50LlByaW5jaXBhbCkudG9CZURlZmluZWQoKTtcclxuICAgIFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGl0KCdJbml0aWFsaXplV2l0aFRva2VucyBzaG91bGQgaGF2ZSBhIFVzZXIgYXV0aGVudGljYXRlZCcsICgpID0+IHtcclxuICAgICAgICBcclxuICAgICAgICBTZWN1cml0eUNvbnRleHRJbml0aWFsaXplci5Jbml0aWFsaXplV2l0aFRva2VucyhbYWNjZXNzVG9rZW5dKTtcclxuICAgICAgICBcclxuICAgICAgICBleHBlY3QoU2VjdXJpdHlDb250ZXh0LkN1cnJlbnQuUHJpbmNpcGFsLklzQXV0aGVudGljYXRlZCkudG9CZVRydXRoeSgpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBpdCgnSW5pdGlhbGl6ZVdpdGhUb2tlbnMgc2hvdWxkIGhhdmUgYSBVc2VyIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgU2VjdXJpdHlDb250ZXh0SW5pdGlhbGl6ZXIuSW5pdGlhbGl6ZVdpdGhUb2tlbnMoIFsgeyBuYW1lOidKb8OjbyBWaXRvcicgfSBdICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KFNlY3VyaXR5Q29udGV4dC5DdXJyZW50LlByaW5jaXBhbC5JZGVudGl0eS5OYW1lKS50b0JlKCdKb8OjbyBWaXRvcicpO1xyXG4gICAgXHJcbiAgICB9KTtcclxuICAgIFxyXG59KTtcclxuIl19
